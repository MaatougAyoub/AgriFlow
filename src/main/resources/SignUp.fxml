<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="controllers.SignUp"
            prefHeight="700.0" prefWidth="650.0"
            fitToWidth="true">

    <VBox spacing="20" style="-fx-background-color: white; -fx-max-width: 800;">
        <padding>
            <Insets top="30" right="40" bottom="30" left="40"/>
        </padding>

        <Label text="S'inscrire" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>

        <Label fx:id="errorLabel" style="-fx-text-fill: #F44336; -fx-background-color: #FFEBEE; -fx-padding: 10; -fx-background-radius: 5;" visible="false" wrapText="true"/>

        <Label fx:id="successLabel" style="-fx-text-fill: #2E7D32; -fx-background-color: #E8F5E9; -fx-padding: 10; -fx-background-radius: 5;" visible="false" wrapText="true"/>

        <!-- Section: Informations communes -->
        <VBox spacing="15">
            <Label text="Informations générales" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #424242;"/>

            <GridPane vgap="15" hgap="15">
                <columnConstraints>
                    <ColumnConstraints minWidth="120" prefWidth="150"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <!-- Type d'utilisateur -->
                <Label text="Type d'utilisateur *" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="typeUtilisateurCombo" GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="250" promptText="Sélectionnez votre type" onAction="#onTypeUtilisateurChange"/>

                <!-- Nom -->
                <Label text="Nom *" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="nomField" promptText="Votre nom" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <!-- Prénom -->
                <Label text="Prénom *" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="prenomField" promptText="Votre prénom" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                <!-- CIN -->
                <Label text="CIN *" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <TextField fx:id="cinField" promptText="Ex: 12345678" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                <!-- Email -->
                <Label text="Email *" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <TextField fx:id="emailField" promptText="exemple@email.com" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                <!-- Mot de passe -->
                <Label text="Mot de passe *" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                <PasswordField fx:id="motDePasseField" promptText="********" GridPane.rowIndex="5" GridPane.columnIndex="1"/>

                <!-- Confirmation mot de passe -->
                <Label text="Confirmer mot de passe *" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                <PasswordField fx:id="confirmMotDePasseField" promptText="********" GridPane.rowIndex="6" GridPane.columnIndex="1"/>

                <!-- Signature -->
                <Label text="Signature" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                <HBox spacing="10" alignment="CENTER_LEFT" GridPane.rowIndex="7" GridPane.columnIndex="1">
                    <TextField fx:id="signaturePathField"
                               promptText="Aucun fichier sélectionné"
                               editable="false"
                               HBox.hgrow="ALWAYS"/>
                    <Button text="Parcourir..."
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 8 15;"
                            onAction="#uploadSignature"/>
                </HBox>

            </GridPane>
        </VBox>

        <!-- Separator -->
        <Separator/>

        <!-- Champs spécifiques pour Agriculteur -->
        <VBox fx:id="agriculteurFieldsBox" spacing="15" visible="false" managed="false">
            <Label text="Informations spécifiques - Agriculteur" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>

            <GridPane vgap="15" hgap="15">
                <columnConstraints>
                    <ColumnConstraints minWidth="120" prefWidth="150"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <!-- Adresse -->
                <Label text="Adresse *" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="adresseField" promptText="Votre adresse complète" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <!-- Parcelles -->
<!--                <Label text="Parcelles" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="parcellesField" promptText="Informations sur vos parcelles" GridPane.rowIndex="1" GridPane.columnIndex="1"/>-->

                <!-- Upload Carte Professionnelle -->
                <Label text="Carte professionnelle *" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <HBox spacing="10" alignment="CENTER_LEFT" GridPane.rowIndex="2" GridPane.columnIndex="1">
                    <TextField fx:id="carteProPathField" promptText="Aucun fichier sélectionné" editable="false" HBox.hgrow="ALWAYS"/>
                    <Button text="Parcourir..." style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 8 15;" onAction="#uploadCartePro"/>
                </HBox>

            </GridPane>
        </VBox>

        <!-- Champs spécifiques pour Expert -->
        <VBox fx:id="expertFieldsBox" spacing="15" visible="false" managed="false">
            <Label text="Informations spécifiques - Expert" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>

            <GridPane vgap="15" hgap="15">
                <columnConstraints>
                    <ColumnConstraints minWidth="120" prefWidth="150"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <!-- Upload Certification -->
                <Label text="Certification *" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <HBox spacing="10" alignment="CENTER_LEFT" GridPane.rowIndex="0" GridPane.columnIndex="1">
                    <TextField fx:id="certificationPathField" promptText="Aucun fichier sélectionné" editable="false" HBox.hgrow="ALWAYS"/>
                    <Button text="Parcourir..." style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 8 15;" onAction="#uploadCertification"/>
                </HBox>

            </GridPane>
        </VBox>

        <!-- Boutons d'action -->
        <HBox spacing="20" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
            <Button text="S'inscrire" style="-fx-background-color: #2E7D32; -fx-text-fill: white; -fx-padding: 12 30; -fx-font-size: 14px; -fx-font-weight: bold;"
                    onAction="#inscrireUtilisateur"/>
            <Button text="Annuler" style="-fx-background-color: #757575; -fx-text-fill: white; -fx-padding: 12 30; -fx-font-size: 14px;"
                    onAction="#annuler"/>
        </HBox>

        <!-- Lien vers connexion -->
        <HBox alignment="CENTER" spacing="5" style="-fx-padding: 10 0 0 0;">
            <Label text="Vous avez déjà un compte ?" style="-fx-text-fill: #757575;"/>
            <Hyperlink text="Se connecter" style="-fx-text-fill: #2E7D32;" onAction="#allerVersConnexion"/>
        </HBox>

    </VBox>

</ScrollPane>