<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.effect.DropShadow?>

<AnchorPane prefHeight="700.0" prefWidth="950.0" style="-fx-background-color: #F8FAF8;" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.DiagnosticController">
    <children>
        <VBox spacing="25" AnchorPane.bottomAnchor="30" AnchorPane.leftAnchor="50" AnchorPane.rightAnchor="50" AnchorPane.topAnchor="30">
            <VBox spacing="5">
                <Label style="-fx-font-size: 28; -fx-font-weight: 800;" text="Diagnostic Intelligent" textFill="#2D5A27" />
                <Label style="-fx-font-size: 14;" text="Utilisez l'intelligence artificielle pour analyser vos cultures en temps rÃ©el." textFill="#718096" />
            </VBox>

            <HBox spacing="30" VBox.vgrow="ALWAYS">
                <children>
                    <VBox prefWidth="450.0" spacing="15" style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 20;">
                        <effect><DropShadow color="#00000015" radius="15" offsetY="5" /></effect>
                        <children>
                            <Label style="-fx-font-weight: bold; -fx-font-size: 16;" text="ðŸ“¸ Photo du symptÃ´me" />
                            <StackPane prefHeight="300" style="-fx-background-color: #F3F4F6; -fx-background-radius: 15; -fx-border-color: #E5E7EB; -fx-border-style: dashed; -fx-border-radius: 15; -fx-border-width: 2;">
                                <children>
                                    <ImageView fx:id="previewImage" fitHeight="280" fitWidth="380" preserveRatio="true" />
                                    <ProgressIndicator fx:id="aiLoader" visible="false" maxHeight="60" maxWidth="60" />
                                </children>
                            </StackPane>
                            <HBox spacing="10" alignment="CENTER">
                                <Button onAction="#choisirImage" style="-fx-background-color: #E5E7EB; -fx-text-fill: #374151; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 20; -fx-cursor: hand;" text="ðŸ“ Charger l'image" />
                                <Button fx:id="btnIA" onAction="#analyserImageIA" style="-fx-background-color: #10B981; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 20; -fx-cursor: hand;" text="âœ¨ Analyse IA" />
                            </HBox>
                        </children>
                    </VBox>

                    <VBox spacing="20" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 20;">
                        <effect><DropShadow color="#00000015" radius="15" offsetY="5" /></effect>
                        <children>
                            <VBox spacing="8">
                                <Label style="-fx-font-weight: bold;" text="Culture concernÃ©e" />
                                <ComboBox fx:id="cultureCombo" maxWidth="Infinity" style="-fx-background-radius: 8;" />
                            </VBox>

                            <VBox spacing="8" VBox.vgrow="ALWAYS">
                                <Label style="-fx-font-weight: bold;" text="Description dÃ©taillÃ©e" />
                                <TextArea fx:id="descriptionArea" promptText="DÃ©crivez ou laissez l'IA gÃ©nÃ©rer la description..." wrapText="true" style="-fx-background-radius: 10; -fx-border-color: #E5E7EB; -fx-border-radius: 10;" VBox.vgrow="ALWAYS" />
                            </VBox>

                            <HBox alignment="CENTER_RIGHT" spacing="15">
                                <Button onAction="#AgriculteurDiagnostics" style="-fx-background-color: transparent; -fx-text-fill: #6B7280; -fx-font-weight: bold;" text="Annuler" />
                                <Button onAction="#envoyerDiagnostic" style="-fx-background-color: #2D5A27; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 12 30; -fx-cursor: hand;" text="Envoyer le rapport" />
                            </HBox>
                        </children>
                    </VBox>
                </children>
            </HBox>
        </VBox>
    </children>
</AnchorPane>