<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.*?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.agriflow.marketplace.controllers.AdminDashboardController"
      spacing="15" style="-fx-background-color: #F4F6F3;"
      stylesheets="@styles.css">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- â•â•â• HEADER â•â•â• -->
    <HBox spacing="12" alignment="CENTER_LEFT">
        <SVGPath content="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"
                 fill="#E65100" scaleX="1.3" scaleY="1.3"/>
        <VBox spacing="2">
            <Label text="Espace Administration" styleClass="admin-title"/>
            <Label text="ModÃ©ration Marketplace â€” Vue globale" style="-fx-font-size: 12px; -fx-text-fill: #757575;"/>
        </VBox>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Retour au Marketplace" styleClass="btn-secondary"
                onAction="#retourMarketplace">
            <graphic>
                <SVGPath content="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                         fill="#757575" scaleX="0.7" scaleY="0.7"/>
            </graphic>
        </Button>
    </HBox>

    <!-- â•â•â• STATS CARDS â•â•â• -->
    <HBox spacing="15" alignment="CENTER_LEFT">
        <HBox styleClass="stat-card" spacing="10" alignment="CENTER_LEFT">
            <SVGPath content="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
                     fill="#2D5A27" scaleX="1.2" scaleY="1.2"/>
            <VBox spacing="2">
                <Label fx:id="totalAnnoncesLabel" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2D5A27;"/>
                <Label text="Annonces" style="-fx-font-size: 11px; -fx-text-fill: #757575;"/>
            </VBox>
        </HBox>

        <HBox styleClass="stat-card" spacing="10" alignment="CENTER_LEFT">
            <SVGPath content="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"
                     fill="#1E88E5" scaleX="1.2" scaleY="1.2"/>
            <VBox spacing="2">
                <Label fx:id="totalReservationsLabel" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #1E88E5;"/>
                <Label text="RÃ©servations" style="-fx-font-size: 11px; -fx-text-fill: #757575;"/>
            </VBox>
        </HBox>

        <HBox styleClass="stat-card" spacing="10" alignment="CENTER_LEFT">
            <SVGPath content="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"
                     fill="#E65100" scaleX="1.2" scaleY="1.2"/>
            <VBox spacing="2">
                <Label fx:id="enAttenteLabel" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #E65100;"/>
                <Label text="En attente" style="-fx-font-size: 11px; -fx-text-fill: #757575;"/>
            </VBox>
        </HBox>
    </HBox>

    <!-- â•â•â• TABPANE â•â•â• -->
    <TabPane fx:id="adminTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS"
             styleClass="admin-tabs">

        <!-- â”€â”€ Onglet 1 : ANNONCES â”€â”€ -->
        <Tab text="ðŸ“‹ Gestion des Annonces">
            <VBox spacing="10">
                <padding><Insets top="12" right="5" bottom="5" left="5"/></padding>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="searchAnnoncesField" promptText="Rechercher une annonce..."
                               style="-fx-padding: 8 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS"/>
                    <Button text="Actualiser" styleClass="action-button" onAction="#chargerAnnonces">
                        <graphic>
                            <SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                                     fill="white" scaleX="0.7" scaleY="0.7"/>
                        </graphic>
                    </Button>
                </HBox>

                <TableView fx:id="annoncesTable" VBox.vgrow="ALWAYS" styleClass="admin-table">
                    <columns>
                        <TableColumn fx:id="colAnnonceId" text="ID" prefWidth="50"/>
                        <TableColumn fx:id="colAnnonceTitre" text="Titre" prefWidth="200"/>
                        <TableColumn fx:id="colAnnonceType" text="Type" prefWidth="100"/>
                        <TableColumn fx:id="colAnnoncePrix" text="Prix" prefWidth="120"/>
                        <TableColumn fx:id="colAnnonceStatut" text="Statut" prefWidth="100"/>
                        <TableColumn fx:id="colAnnonceProprietaire" text="PropriÃ©taire" prefWidth="150"/>
                        <TableColumn fx:id="colAnnonceDate" text="CrÃ©Ã©e le" prefWidth="120"/>
                        <TableColumn fx:id="colAnnonceActions" text="Actions" prefWidth="120"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- â”€â”€ Onglet 2 : RÃ‰SERVATIONS â”€â”€ -->
        <Tab text="ðŸ“… Gestion des RÃ©servations">
            <VBox spacing="10">
                <padding><Insets top="12" right="5" bottom="5" left="5"/></padding>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="searchReservationsField" promptText="Rechercher une rÃ©servation..."
                               style="-fx-padding: 8 12; -fx-background-radius: 8;" HBox.hgrow="ALWAYS"/>
                    <Button text="Actualiser" styleClass="action-button" onAction="#chargerReservations">
                        <graphic>
                            <SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                                     fill="white" scaleX="0.7" scaleY="0.7"/>
                        </graphic>
                    </Button>
                </HBox>

                <TableView fx:id="reservationsTable" VBox.vgrow="ALWAYS" styleClass="admin-table">
                    <columns>
                        <TableColumn fx:id="colResId" text="ID" prefWidth="50"/>
                        <TableColumn fx:id="colResAnnonce" text="Annonce" prefWidth="180"/>
                        <TableColumn fx:id="colResDemandeur" text="Client" prefWidth="130"/>
                        <TableColumn fx:id="colResProprietaire" text="PropriÃ©taire" prefWidth="130"/>
                        <TableColumn fx:id="colResStatut" text="Statut" prefWidth="100"/>
                        <TableColumn fx:id="colResDateDebut" text="DÃ©but" prefWidth="100"/>
                        <TableColumn fx:id="colResDateFin" text="Fin" prefWidth="100"/>
                        <TableColumn fx:id="colResPrix" text="Prix Total" prefWidth="100"/>
                        <TableColumn fx:id="colResActions" text="Actions" prefWidth="120"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>
    </TabPane>

</VBox>
